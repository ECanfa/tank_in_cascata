\documentclass[12pt]{article}
\usepackage[margin=3cm]{geometry}
\usepackage[]{fontenc}
\usepackage[utf8]{inputenc}
%\usepackage[italian]{babel}
\usepackage{geometry}
\geometry{a4paper, top=2cm, bottom=3cm, left=1.5cm, right=1.5cm, heightrounded, bindingoffset=5mm}
\usepackage{amsmath}
\usepackage{amssymb}
%\usepackage{gensymb}
\usepackage{graphicx}
\usepackage{psfrag,amsmath,amsfonts,verbatim}
\usepackage{xcolor}
%\usepackage{color,soul}
\usepackage{fancyhdr}
\usepackage{indentfirst}
\usepackage{graphicx}
\usepackage{newlfont}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{latexsym}
\usepackage{amsthm}
%\usepackage{subfigure}
\usepackage{subcaption}
\usepackage{psfrag}
\usepackage{footnote}
\usepackage{graphics}
\usepackage{color}
\usepackage{hyperref}
%\usepackage{tikz}
\title{Tank in Cascata}
\author{Aleandro Alushi, Emanuele Canfarini, Luciano Gargiulo}
\begin{document}
\maketitle
Il progetto riguarda il controllo del livello dall'acqua raggiunto da due serbatoi in cascata.\\% aggiungere continuo
La dinamica del sistema e descritta dalle seguenti equazioni differenziali:
\begin{subequations}\label{eq:system}
\begin{align}
    \dot{a_{1}}&=-k_{1}\sqrt{a_{1}}+k_{4}V(t).\\
    \dot{a_{2}}&= k_{2}\sqrt{a_{1}}-k_{3}\sqrt{a_{2}}
\end{align}
\end{subequations}

\section{Espressione del sistema in forma di stato e calcolo del sistema linearizzato intorno ad una coppia di equilibrio}

Innanzitutto, esprimiamo il sistema~\eqref{eq:system} nella seguente forma di stato
%
\begin{subequations}
\begin{align}\label{eq:state_form}
	\dot{x} &= f(x,u)
	\\
	y &= h(x,u).
\end{align}
\end{subequations}
%
Pertanto, andiamo individuare lo stato $x$, l'ingresso $u$ e l'uscita $y$ del sistema come segue 
%
\begin{align*}
	x := \dots, \quad u := \dots, \quad y := \dots.
\end{align*}
%
Coerentemente con questa scelta, ricaviamo dal sistema~\eqref{eq:system} la seguente espressione per le funzioni $f$ ed $h$
%
\begin{align*}
	f(x,u) &:= \dots
	\\
	h(x,u) &:= \dots.
\end{align*}
%
Una volta calcolate $f$ ed $h$ esprimiamo~\eqref{eq:system} nella seguente forma di stato
%
\begin{subequations}\label{eq:our_system_state_form}
\begin{align}
	\begin{bmatrix}
		\dot{x}_1
		\\
		\dot{x}_2
	\end{bmatrix} &= \begin{bmatrix}
		-k_{1}\sqrt{a_{1}}+k_{4}V(t).\\
	         k_{2}\sqrt{a_{1}}-k_{3}\sqrt{a_{2}}
	\end{bmatrix}\label{eq:state_form_1}
	\\
	y &= \dots.
\end{align}
\end{subequations}
%
Per trovare la coppia di equilibrio $(x_e, u_e)$ di~\eqref{eq:our_system_state_form}, ci manca l'ingresso di equilibrio, che andiamo a calcolare tramite la sequente equazione
%
\begin{align}
    u_{e} = (\frac{k_{1}}{k_{2}})\sqrt{x_{e,1}}
\end{align}
%
dal quale otteniamo
%
\begin{align}
    x_e := \begin{bmatrix}
    		9.45
		\\
		4.20
    		\end{bmatrix},  \quad u_e = 0.\label{eq:equilibirum_pair}
\end{align}
%
Definiamo le variabili alle variazioni $\delta x$, $\delta u$ e $\delta y$ come 
%
\begin{align*}
	\delta x &= x(t) - x_{e},\\
	\delta u &= u(t) - u_{e},\\
	\delta y &= y(t) - y_{e}
\end{align*}
%
L'evoluzione del sistema espressa nelle variabili alle variazioni pu\`o essere approssimativamente descritta mediante il seguente sistema lineare
%
\begin{subequations}\label{eq:linearized_system}
\begin{align}
	\delta \dot{x} &= A\delta x + B\delta u
	\\
	\delta y &= C\delta x + D\delta u,
\end{align}
\end{subequations}
%
dove le matrici $A$, $B$, $C$ e $D$ vengono calcolate come
%
\begin{subequations}\label{eq:matrices} %make side by side instead
\begin{align}
    A &= \begin{bmatrix}
	a_{1,1} & a{1,2}
		\\
	a_{2,1} & a{2,2}
	 \end{bmatrix}
	\\
    B &= \begin{bmatrix}
	b_{1,1} & b{1,2}
		\\
	b_{2,1} & b{2,2}
	 \end{bmatrix}
	 \\
    C &= \begin{bmatrix}
	c_{1,1} & c{1,2}
		\\
	c_{2,1} & c{2,2}
	 \end{bmatrix}
	 \\
    D &= 0
\end{align}
\end{subequations}
%
\section{Calcolo Funzione di Trasferimento}
In questa sezione, andiamo a calcolare la funzione di trasferimento $G(s)$ dall'ingresso $\delta u$ all'uscita $\delta y$ mediante la seguente formula 
%
%
\begin{align}\label{eq:transfer_function}
    G(s) = N(s)/D(s) = \dots
\end{align}
%
Dunque il sistema linearizzato~\eqref{eq:linearized_system} Ã¨ caratterizzato dalla funzione di trasferimento~\eqref{eq:transfer_function} con $\dots$ poli $p_1 = \cdots, \cdots$ e $\dots$ zeri $z_i =\cdots$. In Figura \dots mostriamo il corrispondente diagramma di Bode.

\dots

\begin{figure}[h]
    \centering
    \fbox{\parbox{0.35\textwidth}{\vspace{1.9cm} Placeholder \vspace{1.9cm}}}
    \caption{Caption.}
    \label{fig:bode_diagram}
\end{figure}

\dots\\

Inoltre, \dots

\dots

\dots

\dots


\section{Mappatura specifiche del regolatore}
%
\end{document}
